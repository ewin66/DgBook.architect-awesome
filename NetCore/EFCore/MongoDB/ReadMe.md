###	技术实现

Redis+T-SQL+Mongodb架构对应功能角色如下。

　　Redis：基于内存**高速缓存**，保存集群中央会话，**即时通信** 	**离线消息队列**，即时通信重发消息集合，用户令牌生命周期管理，应用高频访问数据**缓存**，HTML5模板数据**缓存**，静态应用资源**缓存**。 
> 对于高频访问的数据放在了Redis中，有效地降低了磁盘I/O，使业务系统响应更为敏捷，满足了高并发下的应用服务的高吞吐要求

　　Mongodb：进行非结构化文档数据存储：包括**图片、图标、语音、工作微博文本**以及结合位置数据的非结构化的文档数据，需要**动态扩展无固定模式的数据**，应用**日志数据**，需要**map-reduce**计算的数据。 

#####	 [MongoDB 教程](https://www.runoob.com/mongodb/mongodb-tutorial.html)

> 　使用了Mongodb切片的水平动态添加，可不中断平台业务系统的同时保障扩容后的查询速度和云计算效能；依据切片键索引分片，计算位于各切片独立进行，使大数据下的实时分析成为现实。

​		T-SQL：进行**事务数据存储**：相关企业帐号数据，企业常规业务数据，企业平台交易数据。 
> 目前这种存储结构，解决了项目中大数据存储和实时云计算的需求。虽然大数据的存储和计算变得简单，但由于版本和技术在日新月异的变化，数据系统的管理工作并不轻松。在新架构下的运维管理还会遇到新的挑战并需不断优化完善。 
> https://blog.csdn.net/younger_z/article/details/54600549





###	Redis

Redis不同于Memcached之处在于

它会将更新的数据异步的持久化到硬盘中或者把进行过的修改操作写入日志文件中。Redis虽然是Key/Value形式的数据库，但是它吸收了部分关系型数据库的优点，如在能保存Lists和Sets类型的数据的同时，还能完成**排序等高级功能**，同时在实现INCR（自增）、SETNX（若不存在Key则创建并设值）等功能时保证其操作的原子性。在此基础上还实现了Master-Slave（主从）同步[2]。

Redis主从复制特点：

（1）支持一个Master可以拥有多个Slave，同时Slave还可以接收其他的Slave； 
（2）主从复制不会阻塞Master和Slave，在同步数据时，Master和Slave都可以接收Client请求[2]。

### [Mongodb相对于关系型数据库的优缺点](https://mxdxm.iteye.com/blog/2093603)

###	MongoDB

MongoDB的核心理念在于文档模型，它是MongoDB数据的基本单元，等价于关系型数据库的行。MongoDB中的集合等价于关系型数据库中的表。一个单一的MongoDB可以承载多个独立的数据库，每个数据库可以拥有自己的集合和管理权限。

 　　MongoDB的**分片架构**是指把数据分割成不同部分，在不同的机器上的存储过程，通过分割数据到不同的服务器上，使得无需使用更强大的机器来存储更多的数据和处理更大的负载。MongoDB支持**自动分片**，集群可以**自动分割数据和数据的再均衡**。MongoDB提供以下的分片技术： 
（1）对负载的变换和数据的分布自动平衡； 
（2）动态添加额外服务器； 
（3）无单点故障； 
（4）自动故障转移。 

#####  优点： 
弱一致性（最终一致），更能保证用户的访问速度；内置GridFS，支持大容量的存储；Schema-less 数据库，不用预先定义结构；内置Sharding；相比于其他NoSQL，第三方支持丰富；性能优越；

#####  缺点：

mongodb不支持事务操作；mongodb占用空间过大；MongoDB没有如MySQL那样成熟的维护工具，这对于开发和IT运营都是个值得注意的地方；